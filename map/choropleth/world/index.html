
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Ramiro Gómez">

    <title>Choropleth Map: World • d3.geomap</title>

    

    <link rel="shortcut icon" href="/img/d3-geomap-logo.png">
    <link rel="alternate" type="application/rss+xml" title="RSS feed" href="/rss.xml">

    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css" rel="stylesheet">
    <link href="/css/style.css#v=1" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
<link href="/d3-geomap/css/d3.geomap.css#v=#v=1" rel="stylesheet">

        
    

  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">d3.geomap</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Docs <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="/docs/map-properties/">Map Properties</a></li>
                    <li><a href="/docs/creating-topojson-files/">Creating TopoJSON Files</a></li>
                    <li><a href="/docs/references/">References</a></li>
                    <li><a href="/docs/changes/">Changelog</a></li>
                </ul>
              </li>
              <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Example Maps <span class="caret"></span></a>
                  <ul class="dropdown-menu" role="menu">
                  
                      <li><a href="/map/choropleth/world/">Choropleth Map: World</a></li>
                  
                      <li><a href="/map/choropleth/us-states/">Choropleth Map: US States</a></li>
                  
                      <li><a href="/map/world-upside-down/">World Upside Down</a></li>
                  
                  </ul>
              </li>
              <li><a href="https://github.com/yaph/d3-geomap">Project Repo</a></li>
              <li><a href="http://maps.ramiro.org/">Map Showcase</a></li>
          </ul>
          <ul class="nav navbar-nav pull-right">
<li id="sharemenu" class="dropdown">
  <span class="navbar-btn"><a href="/download/d3-geomap-1.0.1.zip" class="btn btn-success"><i class="fa fa-download"></i> Download</a></span>
  <button type="button" class="dropdown-toggle btn btn-success navbar-btn" data-toggle="dropdown"><i class="fa fa-plus"></i></button>
  <ul class="share dropdown-menu pull-right">
    <li><a href="/rss.xml" class="btn btn-default"><i class="fa fa-rss"></i> RSS Feed</a></li>
    <li><a href="https://flattr.com/submit/auto?user_id=rg&url=https%3A%2F%2Fgithub.com%2Fyaph%2Fd3-geomap" class="btn btn-default"><i class="fa fa-heart"></i> Flattr this</a>
    <li><a rel="nofollow" href="https://twitter.com/share?url=http%3A//d3-geomap.github.io/map/choropleth/world/&text=Choropleth%20Map%3A%20World" class="btn btn-default"><i class="fa fa-twitter"></i> Twitter</a></li>
    <li><a rel="nofollow" href="http://www.facebook.com/sharer.php?u=http%3A//d3-geomap.github.io/map/choropleth/world/&t=Choropleth%20Map%3A%20World" class="btn btn-default"><i class="fa fa-facebook"></i> Facebook</a></li>
    <li><a rel="nofollow" href="https://plus.google.com/share?url=http%3A//d3-geomap.github.io/map/choropleth/world/" class="btn btn-default"><i class="fa fa-google-plus"></i> Google+</a></li>
    <li><a rel="nofollow" href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A//d3-geomap.github.io/map/choropleth/world/&title=Choropleth%20Map%3A%20World" class="btn btn-default"><i class="fa fa-linkedin"></i> LinkedIn</a></li>
    <li><a rel="nofollow" href="http://reddit.com/submit?url=http%3A//d3-geomap.github.io/map/choropleth/world/&title=Choropleth%20Map%3A%20World" class="btn btn-default"><i class="fa fa-share"></i> Reddit</a></li>
    <li><a rel="nofollow" href="http://www.stumbleupon.com/submit?url=http%3A//d3-geomap.github.io/map/choropleth/world/&title=Choropleth%20Map%3A%20World" class="btn btn-default"><i class="fa fa-share"></i> Stumble</a></li>
  </ul>
</li>
</ul>
        </div>
      </div>
    </div>

    
<div class="container">
  <div class="row">
    <div class="col-lg-10 col-lg-offset-1">
        <h1>Choropleth Map: World</h1>
        <div><p>This example shows how to create a choropleth world map with <code>d3.geomap.choropleth</code>. This example displays world population data from downloaded from the <a href="http://data.worldbank.org/indicator/SP.POP.TOTL">World Bank databank</a>.</p>
<p>You can set various properties of the map when instantiating a map object. First specify the topojson file to load, then set the color scheme, choose the <code>YR2010</code> column as the one to display, set the format according to the <code>format</code> function defined first, display a legend, and set the unitId to <code>Country Code</code>. Let's go into more details about the individual settings.</p>
<p>d3.geomap comes with support for color schemes from the <a href="http://colorbrewer2.org/">ColorBrewer project</a>. We choose the sequential multi-hue scheme Yellow - Green - Blue appropriate for the population data displayed and for best accuracy the maximum number of bins for sequential schemes from ColorBrewer, which is 9.</p>
<p>The value in the call to the <code>column</code> method specifies which column of the CSV file to display on the map based on the header row in the CSV. <code>d3.geomap.choropleth</code> requires this header row to be present.</p>
<p>The <code>format</code> function defines how to format values in the map legend and in tooltips when moving the mouse over a country.</p>
<p>The <code>legend</code> can currently be set to <code>true</code> and <code>false</code>. If <code>true</code> it will look like the one in the example. If you don't want to display a legend or prefer another type of legend you have to set <code>legend</code> to <code>false</code> and draw your own.</p>
<p>Finally the <code>unitId</code> specifies which column in the CSV file contains the ID values of the geographic units displayed on the map. In this case the units are countries and the ID is the 3 letter <code>Country Code</code> defined in <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 Alpha 3</a>. This is the same ID as used in the topojson file. If you use a different topojson file with another code, e. g. the ISO 2 code, you need to make sure to include this in the CSV and set the <code>unitId</code> accordingly.</p>
<p>After setting up the map, we need to load the CSV file, select the div with the id <code>map</code> set the selection <code>datum</code> to the loaded CSV and call the <code>map.draw</code> method defined in d3-geomap. You have to provide the <code>map</code> object itself as the 2nd argument to <code>call</code>.</p>
<p>See the complete JavaScript code needed to render the map below.</p>
<pre><code>var format = function(d) {
    d = d / 1000000;
    return d3.format(&#39;,.02f&#39;)(d) + &#39;M&#39;;
}

var map = d3.geomap.choropleth()
    .geofile(&#39;/d3-geomap/topojson/world/countries.json&#39;)
    .colors(colorbrewer.YlGnBu[9])
    .column(&#39;YR2010&#39;)
    .format(format)
    .legend(true)
    .unitId(&#39;Country Code&#39;);

d3.csv(&#39;/data/sp.pop.totl.csv&#39;, function(error, data) {
    d3.select(&#39;#map&#39;)
        .datum(data)
        .call(map.draw, map);
});
</code></pre></div>
        <div id="map"></div>
        
            <h3>Data</h3>
            <p>See an excerpt of the data used in this map below. Currently CSV is the only supported data format for creating choropleth maps with d3.geomap.</p>
            <pre>﻿Series Code,Country Code,YR2004,YR2005,YR2006,YR2007,YR2008,YR2009,YR2010,YR2011,YR2012,YR2013
SP.POP.TOTL,AFG,24018682,24860855,25631282,26349243,27032197,27708187,28397812,29105480,29824536,30551674
SP.POP.TOTL,ALB,3014579,2992724,2968028,2940880,2912559,2884303,2856673,2829337,2801681,2773620
SP.POP.TOTL,DZA,33461345,33960903,34507214,35097043,35725377,36383302,37062820,37762962,38481705,39208194
SP.POP.TOTL,ASM,59262,59117,58652,57919,57053,56245,55636,55274,55128,55165
SP.POP.TOTL,ADO,79060,81223,81877,81292,79969,78659,77907,77865,78360,79218
...</pre>
        
        <hr>
        <h3>Example Maps</h3>
<ul class="nav nav-pills nav-stacked">
    
        <li><a href="/map/choropleth/world/">Choropleth Map: World</a></li>
    
        <li><a href="/map/choropleth/us-states/">Choropleth Map: US States</a></li>
    
        <li><a href="/map/world-upside-down/">World Upside Down</a></li>
    
</ul>
    </div>
  </div>
</div>


    <div class="container">
      <hr>
      <footer>
        <p>CC BY-SA 2015 <a href="http://ramiro.org/">Ramiro Gómez</a> (<a href="https://twitter.com/yaph">@yaph</a>)</p>
      </footer>
    </div>
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/script.js#v=1"></script>

    
<script src="/d3-geomap/vendor/d3.geomap.dependencies.min.js#v=#v=1"></script>
<script src="/d3-geomap/js/d3.geomap.min.js#v=#v=1"></script>

        
            <script src="/js/maps/choropleth/world.js#v=1"></script>
        
    

  </body>
</html>